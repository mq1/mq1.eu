name: Generate PDFs

on: push

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: r-lib/actions/setup-pandoc@v2
      - uses: r-lib/actions/setup-tinytex@v2

      - run: |
          tlmgr install inter
          mkdir dist
          pandoc src/pages/cv-en.md --pdf-engine xelatex -V 'geometry:margin=1cm' -V 'header-includes:\usepackage[sfdefault]{inter}\pagenumbering{gobble}' -o dist/manuel-quarneti-cv-en.pdf
          pandoc src/pages/cv-it.md --pdf-engine xelatex -V 'geometry:margin=1cm' -V 'header-includes:\usepackage[sfdefault]{inter}\pagenumbering{gobble}' -o dist/manuel-quarneti-cv-it.pdf

      - uses: softprops/action-gh-release@v1
        with:
          tag_name: cv
          files: dist/*
